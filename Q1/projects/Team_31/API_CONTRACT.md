# API Contract for VidyaVichar

This document is the single source of truth for the VidyaVichar API. It defines the data structures, API endpoints, and real-time events that connect the frontend and backend.

---
## ðŸ“¦ Database Schema

All question data is stored in a MongoDB collection following this schema.

### The `Question` Object
```json
{
  "_id": "string (auto-generated by MongoDB)",
  "text": "string",
  "author": "string",
  "status": "string ('unanswered' or 'answered')",
  "isImportant": "boolean",
  "createdAt": "date-time string (auto-generated)"
}
````

-----

## ðŸ”— API Endpoints

The following RESTful endpoints are available.

| Method | Endpoint             | Description                                   | Request Body                                       | Success Response (200 OK)                   |
|:-------|:---------------------|:----------------------------------------------|:---------------------------------------------------|:--------------------------------------------|
| `POST` | `/api/questions`     | Creates a new question.                       | `{ "text": "string", "author": "string" }`         | The newly created `Question` object.        |
| `GET`  | `/api/questions`     | Fetches all questions. Supports filtering.    | (None)                                             | An array of `Question` objects.             |
| `PATCH`| `/api/questions/:id` | Updates a question's status or importance.    | `{ "status": "answered" }` or `{ "isImportant": true }` | The updated `Question` object.              |
| `DELETE`| `/api/questions`     | Clears all questions from the board.          | (None)                                             | `{ "message": "All questions cleared" }` |

**Note on Filtering:** The `GET /api/questions` endpoint accepts query parameters like `?status=unanswered` to filter the results.

-----

## âš¡ Real-Time Events (Socket.IO)

The server uses Socket.IO to push real-time updates to connected clients.

### `newQuestion`

  * **Direction:** Server â†’ Client
  * **Payload:** The new `Question` object that was just created.
  * **Description:** Fired whenever a user submits a new question. The frontend should listen for this event to add the new question to the board without a page refresh.

### `questionUpdated`

  * **Direction:** Server â†’ Client
  * **Payload:** The updated `Question` object.
  * **Description:** Fired whenever an instructor updates a question (e.g., marks as answered). The frontend should listen for this to update the specific sticky note.

### `boardCleared`

  * **Direction:** Server â†’ Client
  * **Payload:** (None)
  * **Description:** Fired when the instructor clears the board. The frontend should listen for this to remove all questions from view.

